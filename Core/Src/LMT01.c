#include "LMT01.h"
#include "bsp.h"
#include "stm32g4xx.h"

/**************************************************************************************************\
* Private memory declarations
\**************************************************************************************************/
static volatile uint16_t lmt01_counter;
static volatile float lmt01_temp;

/**************************************************************************************************\
* Public functions
\**************************************************************************************************/

/**
 ***************************************************************************************************
 *
 * @brief   LMT01 ISR
 *
 **************************************************************************************************/
void LMT01_ISR(void)
{
    lmt01_counter++;
    
    BSP_LMT01_Timeout_Timer_Enable();
}

/**
 ***************************************************************************************************
 *
 * @brief   Read the current encoder data.
 *
 **************************************************************************************************/
uint16_t LMT01_Get_Temp(void)
{
    // HAL_NVIC_DisableIRQ(BSP_Get_Motor_Encoder_A_IRQN());
    return lmt01_counter;
    // HAL_NVIC_EnableIRQ(BSP_Get_Motor_Encoder_A_IRQN());
}